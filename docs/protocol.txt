0) On power-on or soft-reset:

Sense, tape read, motor line and tape write GPIO pins at Pi are all by default
inputs (as all GPIO pins are) with pull-down resistors (selected this way for
CBM Tape Pi).

1) CBM Tape Pi initializes:

Setting sense output line to HIGH at CBM (circuit inverts signal).
Setting tape read output line to HIGH at CBM (circuit inverts signal).
Setting motor line to input with pull-down (circuit does NOT invert signal).
Setting tape write line to input with pull-down (circuit does invert signal).

2) Reading configuration file and either entering SAVE or one of the fast modes:

2)a) Either SAVE mode:

2)a)1) Setting sense line to LOW at CBM (simulating user pressing button).

2)a)2)Waiting for data from CBM.

2)a)3)Interpreting data, acting on it and maybe sending data back.

-> Going back to first step 2)a)1).

2)b) Or one of the fast modes (each "machine" has its own fast mode):

2)b)1) Entering load loop (this example is for the PET series):

2)b)1)1) Waiting for WRITE getting HIGH at CBM (correct for PET, only!).

2)b)1)2) Actually entering loop, where Pi sends the fast mode PRG over and over
         to the CBM (simulating an endless tape).

         After each send, check, if WRITE signal changed to LOW.
         
         If not waiting to give CBM enough time for the ISR to disable the motor
         signal.

-> At some point CBM loaded fast mode PRG and user entered SYS command to run
   the fast mode PRG installer.

   -> Fast mode installer sets WRITE to LOW.

      -> Pi exits the load loop.

2)b)1)3) Entering command loop (with fast mode enabled).

--- WORK IN PROGRESS ---

2) Fast mode is active.

PI: Call petload_retrieve():

- PI: Request first data bit: data-req / SENSE = LOW

- PI: Waiting for data-ready toggle from HIGH to LOW
      [wait_for_data_ready_pulse()].

[=> CBM (OS): MOTOR goes HIGH]

CBM: User: (Fast mode) command execution:

- CBM: Disable interrupts, make sure that MOTOR is set to HIGH).

* CBM: Waits for data-req / SENSE to get LOW. <=> Already LOW.

- CBM: Set current bit to data line.

- CBM: MOTOR pulse HIGH -> LOW -> HIGH.

=> PI: Read bit from data line, request next bit (go to * above).

>>> At some point, all bits are transferred. <<<

CBM: Toggle to Pi -> CBM transfer mode.
